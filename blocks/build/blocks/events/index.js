(()=>{"use strict";var e,t={471:()=>{const e=window.wp.blocks,t=window.wp.i18n,n=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"wpgens/events","version":"1.0.0","title":"Events Slider","category":"wpgens","icon":"calendar","description":"A slider block for displaying events","textdomain":"wpgens-blocks","supports":{"html":false,"align":["wide","full"]},"attributes":{"align":{"type":"string","default":"wide"},"events":{"type":"array","default":[]},"selectedEvents":{"type":"array","default":[]},"viewAllUrl":{"type":"string","default":"/events/"}},"editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}'),l=window.React,r=window.wp.blockEditor,a=window.wp.components,s=window.wp.element,i=window.wp.data,o=window.wp.coreData,d=window.wp.htmlEntities;(0,e.registerBlockType)(n.name,{...n,edit:function({attributes:e,setAttributes:n}){const c=(0,r.useBlockProps)({"data-align":e.align}),{selectedEvents:m=[],viewAllUrl:p}=e,[u,g]=(0,s.useState)(!0),[w,f]=(0,s.useState)(""),[v,h]=(0,s.useState)([]),[b,x]=(0,s.useState)([]),{events:E,allEvents:y}=(0,i.useSelect)((e=>{let t=[];if(m.length>0){const n=e(o.store).getEntityRecords("postType","events",{include:m,per_page:m.length,_embed:!0});n&&(t=n)}const n={per_page:100,status:"publish",orderby:"date",order:"desc"};return w&&(n.search=w),{events:t,allEvents:e(o.store).getEntityRecords("postType","events",n)||[]}}),[m,w]);(0,s.useEffect)((()=>{if(y&&y.length>0){const e=y.filter((e=>!m.includes(e.id.toString()))).map((e=>({id:e.id.toString(),name:(0,d.decodeEntities)(e.title.rendered)})));h(e),g(!1)}else y&&(h([]),g(!1))}),[y,m]),(0,s.useEffect)((()=>{if(E){const e=E.map((e=>(0,d.decodeEntities)(e.title.rendered)));x(e)}}),[E]);const k=e=>e._embedded&&e._embedded["wp:featuredmedia"]&&e._embedded["wp:featuredmedia"][0]&&e._embedded["wp:featuredmedia"][0].source_url?e._embedded["wp:featuredmedia"][0].source_url:"",_=(e,t)=>e?e.length<=t?e:e.substring(0,t)+"...":"";return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(r.InspectorControls,null,(0,l.createElement)(a.PanelBody,{title:(0,t.__)("Events Slider Settings","wpgens-blocks")},(0,l.createElement)(a.FormTokenField,{label:(0,t.__)("Search and Select Events","wpgens-blocks"),value:b,suggestions:v.map((e=>e.name)),onChange:e=>{const t=b.filter((t=>!e.includes(t)));if(t.length>0){const e=t[0],l=E.find((t=>(0,d.decodeEntities)(t.title.rendered)===e));if(l){const e=m.filter((e=>e!==l.id.toString()));n({selectedEvents:e})}}else if(e.length>b.length){const t=e.find((e=>!b.includes(e))),l=v.find((e=>e.name===t));l&&n({selectedEvents:[...m,l.id]})}},onInputChange:e=>{f(e),g(!0)},maxSuggestions:10,placeholder:(0,t.__)("Type to search events...","wpgens-blocks")}),u&&(0,l.createElement)("div",{style:{textAlign:"center",padding:"10px"}},(0,l.createElement)(a.Spinner,null)),(0,l.createElement)(a.TextControl,{label:(0,t.__)("View All URL","wpgens-blocks"),value:p,onChange:e=>n({viewAllUrl:e})}),(0,l.createElement)(a.Button,{isPrimary:!0,onClick:()=>{g(!0),f(""),(0,i.select)(o.store).invalidateResolution("getEntityRecords",["postType","events"])},className:"components-button"},(0,t.__)("Refresh Events","wpgens-blocks")))),(0,l.createElement)("div",{...c},(0,l.createElement)("section",{className:"max-w-screen-2xl px-4 md:px-8 2xl:px-0 my-16 md:my-32 mx-auto relative"},(0,l.createElement)("button",{"aria-label":"slide backward",className:"hidden md:inline-block rounded-full text-center absolute z-30 ml-5 2xl:-ml-5 w-10 h-10 bg-primary cursor-pointer",style:{top:"40%",transform:"translateY(-50%)"},id:"prev"},(0,l.createElement)("svg",{className:"text-black inline",width:"8",height:"14",viewBox:"0 0 8 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("path",{d:"M7 1L1 7L7 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),(0,l.createElement)("div",{className:"w-full h-full mx-auto overflow-x-hidden overflow-y-hidden"},(0,l.createElement)("div",{id:"slider",className:"grid grid-cols-2 gap-4 md:flex md:space-x-4 transition ease-out duration-700"},u&&!E?.length?(0,l.createElement)("div",{className:"col-span-2 text-center py-8"},(0,l.createElement)(a.Spinner,null),(0,t.__)("Loading events...","wpgens-blocks")):E&&E.length>0?E.map((e=>{const t=(e=>{if(!e)return{day:"",month:"",date:""};const t=new Date(e);return{day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()],month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],date:t.getDate()}})(e.meta?.start_date),n=e.meta?.venue||"",r=(0,d.decodeEntities)(e.title.rendered);return(0,l.createElement)("a",{key:e.id,href:"#",className:"flex flex-col flex-shrink-0 bg-black md:w-[280px] border-b-[3px] border-primary"},e.featured_media?(0,l.createElement)("img",{src:k(e),alt:r,className:"w-full"}):(0,l.createElement)("div",{className:"w-full h-48 bg-gray-800"}),(0,l.createElement)("div",{className:"flex items-center text-white relative pr-4"},(0,l.createElement)("div",{className:"absolute -top-8 h-8 w-full bg-gradient-to-t from-black to-transparent"}),(0,l.createElement)("div",{className:"flex flex-col w-16 md:w-16 flex-shrink-0 py-2 text-center text-[12px] font-semibold tracking-[1px] uppercase"},(0,l.createElement)("span",null,t.day),(0,l.createElement)("span",{className:"text-primary"},t.month),(0,l.createElement)("span",{className:"text-primary text-xl md:text-[27px]"},t.date)),(0,l.createElement)("div",{className:"w-[1px] bg-[#424242] h-16 mr-2 md:mr-4"}),(0,l.createElement)("div",{className:"flex flex-col uppercase font-semibold justify-center"},(0,l.createElement)("span",{className:"text-[11px] mb-1 first-letter:tracking-[0.55px] text-gray-400 font-normal"},_(n,30)),(0,l.createElement)("span",{className:"text-xs md:text-base !leading-4"},_(r,25)))))})):(0,l.createElement)("div",{className:"col-span-2 text-center py-8"},"No events selected"))),(0,l.createElement)("button",{"aria-label":"slide forward",className:"hidden md:inline-block rounded-full right-0 text-center absolute z-30 mr-5 2xl:-mr-5 w-10 h-10 bg-primary cursor-pointer",style:{top:"40%",transform:"translateY(-50%)"},id:"next"},(0,l.createElement)("svg",{className:"text-black inline",width:"8",height:"14",viewBox:"0 0 8 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("path",{d:"M1 1L7 7L1 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),(0,l.createElement)("div",{className:"text-center mt-16"},(0,l.createElement)("a",{href:p,className:"primary-btn"},(0,t.__)("View all events","wpgens-blocks"))))))},save:function(){return null}})}},n={};function l(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,l),a.exports}l.m=t,e=[],l.O=(t,n,r,a)=>{if(!n){var s=1/0;for(c=0;c<e.length;c++){for(var[n,r,a]=e[c],i=!0,o=0;o<n.length;o++)(!1&a||s>=a)&&Object.keys(l.O).every((e=>l.O[e](n[o])))?n.splice(o--,1):(i=!1,a<s&&(s=a));if(i){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,r,a]},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={678:0,650:0};l.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[s,i,o]=n,d=0;if(s.some((t=>0!==e[t]))){for(r in i)l.o(i,r)&&(l.m[r]=i[r]);if(o)var c=o(l)}for(t&&t(n);d<s.length;d++)a=s[d],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(c)},n=globalThis.webpackChunkbottleservices_theme=globalThis.webpackChunkbottleservices_theme||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=l.O(void 0,[650],(()=>l(471)));r=l.O(r)})();