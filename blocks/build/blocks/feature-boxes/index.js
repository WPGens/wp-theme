(()=>{"use strict";const e=window.wp.blocks,t=window.React,l=window.wp.i18n,a=window.wp.blockEditor,n=window.wp.components,c=window.wp.element,o=window.wp.primitives,s=(0,t.createElement)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(o.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})),i=["image"],r=JSON.parse('{"UU":"wpgens/feature-boxes"}');(0,e.registerBlockType)(r.UU,{edit:function({attributes:e,setAttributes:o}){console.log("Feature Boxes Edit - Initial render with attributes:",e);const{columns:r=[],title:m,subtitle:p}=e,g=(0,a.useBlockProps)(),[u,d]=(0,c.useState)(null),x=()=>{console.log("Adding new column");const e=[...r,{title:"New Feature",subtitle:"Feature Description",image:"",link:"#"}];console.log("New columns array:",e),o({columns:e})},b=(e,t,l)=>{console.log(`Updating column ${e}, property ${t}:`,l);const a=[...r];a[e]={...a[e],[t]:l},o({columns:a})},w=({column:e,index:c})=>(console.log(`Rendering FeatureBoxEditor for index ${c}:`,e),e?(0,t.createElement)("div",null,(0,t.createElement)(n.TextControl,{label:(0,l.__)("Title","wpgens-blocks"),value:e.title||"",onChange:e=>b(c,"title",e)}),(0,t.createElement)(n.TextControl,{label:(0,l.__)("Subtitle","wpgens-blocks"),value:e.subtitle||"",onChange:e=>b(c,"subtitle",e)}),(0,t.createElement)(n.TextControl,{label:(0,l.__)("Link","wpgens-blocks"),value:e.link||"#",onChange:e=>b(c,"link",e)}),(0,t.createElement)(n.BaseControl,{label:(0,l.__)("Image","wpgens-blocks"),className:"editor-feature-image"},(0,t.createElement)(a.MediaUploadCheck,null,e.image?(0,t.createElement)("div",{className:"image-preview-wrapper"},(0,t.createElement)("img",{src:e.image,alt:e.title||"",className:"image-preview"}),(0,t.createElement)("div",{className:"image-actions"},(0,t.createElement)(n.Button,{isDestructive:!0,onClick:()=>b(c,"image","")},(0,l.__)("Remove","wpgens-blocks")),(0,t.createElement)(a.MediaUpload,{onSelect:e=>b(c,"image",e.url),onClose:()=>console.log("Media modal closed"),allowedTypes:i,title:(0,l.__)("Select or Upload Image","wpgens-blocks"),value:e.image,render:({open:e})=>(0,t.createElement)(n.Button,{isPrimary:!0,onClick:e},(0,l.__)("Replace","wpgens-blocks"))}))):(0,t.createElement)(a.MediaUpload,{onSelect:e=>b(c,"image",e.url),onClose:()=>console.log("Media modal closed"),allowedTypes:i,title:(0,l.__)("Select or Upload Image","wpgens-blocks"),value:"",render:({open:e})=>(0,t.createElement)(n.Button,{isPrimary:!0,onClick:e},(0,l.__)("Select Image","wpgens-blocks"))}))),(0,t.createElement)(n.Button,{isDestructive:!0,onClick:()=>(e=>{console.log(`Removing column ${e}`);const t=[...r];t.splice(e,1),o({columns:t}),d(null)})(c),className:"remove-column-button"},(0,l.__)("Remove Feature Box","wpgens-blocks"))):(console.log(`No column data for index ${c}`),null));return(0,t.createElement)("div",{...g},(0,t.createElement)(a.InspectorControls,null,(0,t.createElement)(n.PanelBody,{title:(0,l.__)("Section Settings","wpgens-blocks")},(0,t.createElement)(n.TextControl,{label:(0,l.__)("Section Title","wpgens-blocks"),value:m||"",onChange:e=>o({title:e})}),(0,t.createElement)(n.TextControl,{label:(0,l.__)("Section Subtitle","wpgens-blocks"),value:p||"",onChange:e=>o({subtitle:e})})),(0,t.createElement)(n.PanelBody,{title:(0,l.__)("Feature Boxes","wpgens-blocks")},r.map(((e,a)=>(0,t.createElement)(n.PanelBody,{key:a,title:`${(0,l.__)("Feature","wpgens-blocks")} ${a+1}`,initialOpen:!1,opened:u===a,onToggle:()=>{console.log(`Toggling panel ${a}, current selectedPanel:`,u),d(u===a?null:a)}},(0,t.createElement)(w,{column:e,index:a})))),(0,t.createElement)(n.Button,{isPrimary:!0,onClick:x,className:"add-column-button",icon:s},(0,l.__)("Add Feature Box","wpgens-blocks")))),(0,t.createElement)("div",{className:"feature-boxes-editor"},(0,t.createElement)("div",{className:"text-center mb-6 md:mb-12"},(0,t.createElement)(a.RichText,{tagName:"h2",className:"text-3xl md:text-4xl lg:text-5xl text-white uppercase font-light mb-2 leading-none",value:m||"",onChange:e=>o({title:e}),placeholder:(0,l.__)("Section Title","wpgens-blocks")}),(0,t.createElement)(a.RichText,{tagName:"p",className:"uppercase md:tracking-[3px] text-primary-dark",value:p||"",onChange:e=>o({subtitle:e}),placeholder:(0,l.__)("Section Subtitle","wpgens-blocks")})),(0,t.createElement)("div",{className:"flex flex-col md:flex-row space-y-8 md:space-x-8 md:space-y-0 text-center "+(r.length>3?"feature-boxes-grid":"")},r.length>0?r.map(((e,n)=>(0,t.createElement)("div",{key:`preview-${n}`,className:"relative flex items-end md:items-center justify-center w-full border-black border-[12px]"},e.image?(0,t.createElement)("img",{src:e.image,className:"w-full object-cover object-center h-64 md:h-auto",alt:e.title||""}):(0,t.createElement)("div",{className:"w-full h-64 md:h-[300px] bg-gray-800 flex items-center justify-center"},(0,t.createElement)("span",{className:"text-white"},(0,l.__)("Select an image","wpgens-blocks"))),(0,t.createElement)("div",{className:"absolute bg-black/40 w-full py-2 uppercase"},(0,t.createElement)(a.RichText,{tagName:"span",className:"text-primary tracking-[1.5px] block",value:e.subtitle||"",onChange:e=>b(n,"subtitle",e),placeholder:(0,l.__)("Subtitle","wpgens-blocks")}),(0,t.createElement)(a.RichText,{tagName:"h2",className:"text-white text-4xl lg:text-[46px] tracking-tighter leading-none",value:e.title||"",onChange:e=>b(n,"title",e),placeholder:(0,l.__)("Title","wpgens-blocks")}))))):(0,t.createElement)("div",{className:"text-center w-full py-8 text-white"},(0,t.createElement)("p",null,(0,l.__)("Add feature boxes using the sidebar controls","wpgens-blocks")),(0,t.createElement)(n.Button,{isPrimary:!0,onClick:x,className:"add-column-button mt-4",icon:s},(0,l.__)("Add Feature Box","wpgens-blocks"))))))},save:function({attributes:e}){const{columns:l,title:n,subtitle:c}=e,o=a.useBlockProps.save();return(0,t.createElement)("section",{...o,className:"max-w-screen-2xl px-4 md:px-8 2xl:px-0 mx-auto relative"},(0,t.createElement)("div",{className:"text-center mb-6 md:mb-12"},(0,t.createElement)("h2",{className:"text-3xl md:text-4xl lg:text-5xl text-white uppercase font-light mb-2 leading-none"},n),(0,t.createElement)("p",{className:"uppercase md:tracking-[3px] text-primary-dark"},c)),(0,t.createElement)("div",{className:"flex flex-col md:flex-row space-y-8 md:space-x-8 md:space-y-0 text-center "+(l.length>3?"md:flex-wrap md:space-x-0 md:gap-8":"")},l.map(((e,l)=>(0,t.createElement)("a",{key:l,href:e.link,className:"relative flex items-end md:items-center justify-center w-full border-black border-[12px]"},e.image&&(0,t.createElement)("img",{src:e.image,className:"w-full object-cover object-center h-64 md:h-auto",alt:e.title}),(0,t.createElement)("div",{className:"absolute bg-black/40 w-full py-2 uppercase"},(0,t.createElement)("span",{className:"text-primary tracking-[1.5px] block"},e.subtitle),(0,t.createElement)("h2",{className:"text-white text-4xl lg:text-[46px] tracking-tighter leading-none"},e.title)))))))}})})();